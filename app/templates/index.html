{% extends "base.html" %}

{% block login %}
<button id="signinButton">Sign in with Google</button>
<script>
  $('#signinButton').click(function() {
    // signInCallback defined in step 6.
    auth2.grantOfflineAccess().then(signInCallback);
  });
</script>
{% endblock %}

{% block callback %}
window.location.href = "{{url_for('index')}}";
{% endblock %}

{% block content %}
<div class="category-grid">
  {% if categories %}
  {% for i in categories %}
  <div class="category-grid__category">
    {% set categoryuser = User.query.get(i.user_id) %}
    <span class="subtext">{{categoryuser.username}}</span>
    <h3>
      <a href="{{url_for('showCategory', id=i.id)}}">{{i.name}}</a>
    </h3>
    <p class="description">{{i.description}}</p>
    <input type="button" value="{{i.id}}">
    <div class="edit_buttons">
      <button class="edit" name="edit" value="{{i.id}}"></button>
      <button class="delete" name="delete" value="{{i.id}}"></button>
    </div>
  {% endfor %}
  {% block addnew %}{% endblock %}
  </div>
</div>
  {% endif %}
<div class="recent_items">
  <h1>Recent Items</h1>
  <div class="recent_items__row">
    {% for i in items[-1:-3:-1] %}
    <div class="recent_items__item">
      {% set itemcategory = Category.query.get(i.category) %}
      <span class="subtext">{{itemcategory.name}}</span>
      <h3>{{i.name}}</h3>
      {% if i.picture %}
      <img src="{{i.picture}}" alt="item image" height="100" width="100">
      {% endif %}
      <p class="desription">{{i.description}}</p>
    </div>
    {% endfor %}
</div>
{% endblock %}
